@model List<IGrouping<DateTime, App.Models.DesignacaoDTO>>

@{
    ViewData["Title"] = "Designações";
}

<h1>
    <a asp-action="Create" class='btn btn-primary'> + </a>
    📃 @ViewData["Title"]
</h1>

<div class="accordion" id="accordionExample">

    @foreach (var grupo in Model)
    {
        var reff = grupo.FirstOrDefault();

        <div class="accordion-item">

            <h2 class="accordion-header">

                <button class='accordion-button @(!reff.SemanaAtual ? "collapsed" : "")' type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapse-@reff.Id">                      
                    🗓️ @grupo.Key.ToString("dd 'd'e MMMM")
                </button>

            </h2>

            <div id="collapse-@reff.Id" class='accordion-collapse collapse @(reff.SemanaAtual ? "show" : "")'
                data-bs-parent="#accordionExample">
                <div class="accordion-body">

                    <div class='list-group list-group-flush '>
                        @foreach (var designacao in grupo)
                        {
                            <a class='list-group-item list-group-item-action' asp-action='Details'
                                asp-route-id='@designacao.Id'>

                                <strong>
                                    @designacao.Tipo @designacao.Observacao
                                    <span class='text-danger'>@(designacao.EhSubstituicao ? "[Substituição]" : "")</span>
                                </strong>
                                <br>

                                <span class='text-muted'> @designacao.Designado @(!string.IsNullOrEmpty(designacao.Ajudante) ?
                            "e" : "") @designacao.Ajudante</span>
                            </a>
                        }
                    </div>

                </div>
            </div>
        </div>
    }
</div>
